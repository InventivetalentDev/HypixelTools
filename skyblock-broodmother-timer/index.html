<!DOCTYPE html>
<html>
    <head>
        <title>Brood Mother Timer // Hypixel Skyblock</title>
        <link rel="icon" type="image/x-icon" href="favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/fontawesome.min.css" integrity="sha256-AaQqnjfGDRZd/lUp0Dvy7URGOyRsh8g9JdWUkyYxNfI=" crossorigin="anonymous"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/brands.min.css" integrity="sha256-u8123o+sLy8uk0Du9H0Ub+KinAoHanzGsBqDkWHY1f8=" crossorigin="anonymous"/>

        <meta charset="utf-8">
        <meta name="description" content="Timer for the Hypixel Skyblock Brood Mother Boss">
<!--        <meta name="image" content="https://hypixel.inventivetalent.org/img/auction.png">-->

        <link rel="stylesheet" href="../shared-css/bgimg.css"/>
        <link rel="stylesheet" href="../shared-css/timer.css"/>
        <style>
            body, .modal-content {
                background-color: rgb(112, 125, 153);
            }

            body, input {
                color: #e9e9e9;
            }

            .btn {
                margin: 3px;
            }

            #btnOverlay {
                position: fixed;
                top: 5px;
                right: 5px;
            }

            #socialButtons {
                font-size: 32px;
            }

            #socialButtons > a {
                margin-left: 4px;
            }

            #onesignal-bell-container {
                z-index: 5000 !important;
            }
        </style>


        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-2604356629473365",
                enable_page_level_ads: true
            });
        </script>
        <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
        <script>
            // var OneSignal = window.OneSignal || [];
            // OneSignal.push(function () {
            //     OneSignal.init({
            //         appId: "1a3f44bd-adb0-44ff-b414-de114a65759e",
            //         notifyButton: {
            //             enable: true,
            //         },
            //     });
            // });
        </script>
    </head>
    <body>
        <div id="bgImage"></div>

        <div id="btnOverlay">
            <!--            <a href="#infoModal" id="infoLink" class="modal-trigger"><i class="material-icons">info_outline</i></a>-->
        </div>

        <div id="content" class="container">

            <div class="center-align">
                <div class="row center-align">
                    <h5 class="center-align" id="timerText">The Brood Mother should spawn in about</h5>
                    <h1 class="center-align" id="time">00:00:00</h1>
                    <span id="nextTime"></span>
                    <br/>
                    <h4 class="center-align" id="suggestionMessage"></h4>
                    <br/>
                    <br/>
                    <noscript>
                        The timer won't work while javascript is disabled.<br/>
                    </noscript>
<!--                    <span id="lastTrackedWrapper">Last event was <span id="lastTrackedTime"></span></span>-->
                </div>

<!--                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>-->
<!--                &lt;!&ndash; DarkAuctionTimer bottom banner &ndash;&gt;-->
<!--                <ins class="adsbygoogle"-->
<!--                     style="display:inline-block;width:700px;height:100px"-->
<!--                     data-ad-client="ca-pub-2604356629473365"-->
<!--                     data-ad-slot="4893037759"></ins>-->
<!--                <script>-->
<!--                    (adsbygoogle = window.adsbygoogle || []).push({});-->
<!--                </script>-->
            </div>

        </div>

        <span style="position: fixed; bottom: 4px; left: 4px; color: #bbbbbb;">Created by <a target="_blank" href="https://inventivetalent.org/?utm_source=hypixel_broodmother_tracker">inventivetalent</a> <span id="d"></span></span>


        <div id="infoModal" class="modal">
            <div class="modal-content">
                <h4>About</h4>
                <p>
                    <!--                    This tool can easily track the spawn times and related events of the Magma Boss on Hypixel's Skyblock.<br/>-->
                    <!--                    You simply check the timer, wait for the boss to spawn and click the according buttons whenever one of the events or the spawn itself occurs.-->
                    <!--                    The timer will update accordingly and display the estimated spawn time, based on the known delays between events.<br/>-->
                    <!--                    This is meant to help everyone. Please don't abuse it by submitting false information. Thanks! :)<br/>-->
                    <br/>
                    <!--                    There are currently <strong><span id="activeUserCount">0</span></strong> users watching this timer!-->
                    <!--                    <br/>-->
                </p>
                <div class="divider"></div>
                <br/>
                <div class="row">
                    <form class="col s12">
                        <div class="row">
                            <!--                            <div class="input-field col s12 m6">-->
                            <!--                                <span>10 Minute Notification</span>-->
                            <!--                                <div class="switch">-->
                            <!--                                    <label>-->
                            <!--                                        Off-->
                            <!--                                        <input type="checkbox" id="tenMinNotificationSwitch">-->
                            <!--                                        <span class="lever"></span>-->
                            <!--                                        On-->
                            <!--                                    </label>-->
                            <!--                                </div>-->
                            <!--                            </div>-->
                            <!--                            <div class="input-field col s12 m6">-->
                            <!--                                <span>5 Minute Notification</span>-->
                            <!--                                <div class="switch">-->
                            <!--                                    <label>-->
                            <!--                                        Off-->
                            <!--                                        <input type="checkbox" id="fiveMinNotificationSwitch">-->
                            <!--                                        <span class="lever"></span>-->
                            <!--                                        On-->
                            <!--                                    </label>-->
                            <!--                                </div>-->
                            <!--                            </div>-->
                            <!--                            <div class="input-field col s12 m6">-->
                            <!--                                <span>Offline Push Notifications</span>-->
                            <!--                                <div class="switch">-->
                            <!--                                    <label>-->
                            <!--                                        Off-->
                            <!--                                        <input type="checkbox" id="pushNotificationSwitch">-->
                            <!--                                        <span class="lever"></span>-->
                            <!--                                        On-->
                            <!--                                    </label>-->
                            <!--                                </div>-->
                            <!--                            </div>-->
                            <div class="input-field col s12 m6">
                                <span>Clicking the red bell in the bottom-right will send you a notification even if your browser is closed!</span>
                            </div>
                            <!--                            <div class="input-field col s12 m6">-->
                            <!--                                <input placeholder="username" id="mcUsername" type="text" class="validate" minlength="3" maxlength="16">-->
                            <!--                                <label for="mcUsername">Minecraft Username</label>-->
                            <!--                            </div>-->
                        </div>
                    </form>

                    <!--                    <a href="./webhooks">Manage Webhooks</a>-->
                </div>

                <div class="divider"></div>
                <br/>
                <div class="row">
                    <div class="col s6">
                        <span id="socialButtons">
                            <a href="https://twitter.com/Inventivtalent"><i class="fab fa-twitter"></i></a>
                            <a href="https://yeleha.co/discord"><i class="fab fa-discord"></i></a>
                            <a href="https://donation.inventivetalent.org/"><i class="fab fa-patreon"></i></a>
                            <!--<a href="https://github.com/InventivetalentDev/HypixelMagmaBossTimer"><i class="fab fa-github"></i></a>-->
                        </span>
                    </div>
                    <div class="col s6 right-align">
                        <!--                        <span><a href="https://hypixel.inventivetalent.org/skyblock-magma-timer/mod" target="_blank"><b>Download the Minecraft Mod</b> &nbsp; <i class="material-icons small" style="vertical-align:middle;">cloud_download</i></a></span>-->
                        <!--                        <br/>-->
                        <!--                        <span>(Automatically tracks events & shows time ingame)</span>-->
                    </div>
                </div>

            </div>
        </div>


        <script>
            if (location.host !== "hypixel.inventivetalent.org") {
                window.location = "https://hypixel.inventivetalent.org/skyblock-broodmother-timer";
            }
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>

        <script>
            window.DOP_config = {
                links: { // Replace with your links
                    paypal: "https://paypal.me/inventivetalent",
                    patreon: "https://patreon.com/inventivetalent"
                },
                enableAnalytics: true
            }
        </script>
        <script src="https://cdn.jsdelivr.net/gh/InventivetalentDev/DonationPopup@master/DonationPopup.min.js"></script>

        <script>
            let bgImgCount = 4;
        </script>
        <script src="../shared-js/bgimg.js"></script>

        <script>
            $(document).ready(function () {

                let estimateData = {};

                function tickTimer() {
                    let now = Date.now();

                    // $("#lastTrackedTime").html(moment(estimateData.latest).fromNow() + "<br/> (" + moment(estimateData.latest).format('MMMM Do YYYY, h:mm:ss a') + ")" );

                    $("#nextTime").text("(" + moment(estimateData.estimate).format('MMMM Do YYYY, h:mm:ss a') + ")");

                    let duration = estimateData.estimate - now;
                    let formattedTimer = moment.utc(duration).format("HH:mm:ss");
                    if (duration > 0) {
                        $("#time").text(formattedTimer);
                        $("#timerText").text("The Brood Mother should spawn in about");

                        $('head title', window.parent.document).text(formattedTimer + " | Brood Mother Timer // Hypixel Skyblock");
                    } else {
                        $("#time").text("NOW");
                        $("#timerText").text("The Brood Mother should spawn");

                        $('head title', window.parent.document).text("NOW | Brood Mother Timer // Hypixel Skyblock");
                    }

                }


                let timerId;

                function refreshEstimate() {
                    $.ajax("https://hypixel-api.inventivetalent.org/api/skyblock/broodmother/estimate").done(function (data) {
                        console.log(data);
                        estimateData = data;


                        tickTimer();
                        clearInterval(timerId);
                        timerId = setInterval(tickTimer, 1000);// tick every second
                    });
                }

                refreshEstimate();
                setInterval(refreshEstimate, 60000);

            });

        </script>
    </body>
</html>
